<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>사용자 이벤트 로그 데이터 파이프라인 | Geunho Bang</title>
  <link rel="stylesheet" href="../../style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Navigation -->
<nav class="nav scrolled" id="nav">
  <div class="nav-inner">
    <a href="../../index.html" class="nav-logo">GB</a>
    <ul class="nav-links">
      <li><a href="../../index.html#about">About</a></li>
      <li><a href="../../index.html#projects" class="active">Projects</a></li>
      <li><a href="../../index.html#contact">Contact</a></li>
    </ul>
    <button class="nav-toggle" id="nav-toggle" aria-label="Toggle menu">
      <span></span><span></span><span></span>
    </button>
  </div>
</nav>


  <main class="project-detail">
    <div class="container">

      <!-- Back -->
      <a href="../../index.html#projects" class="back-link">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5m0 0 7 7m-7-7 7-7"/></svg>
        Projects
      </a>

      <!-- Hero image -->
      
      <div class="project-detail-hero">
        <img src="images/thumbnail.svg" alt="사용자 이벤트 로그 데이터 파이프라인">
      </div>
      

      <!-- Header -->
      <div class="project-detail-header">
        <h1>사용자 이벤트 로그 데이터 파이프라인</h1>
        
        <div class="project-detail-tags">
          
            <span>AWS Firehose</span>
          
            <span>S3</span>
          
            <span>Athena</span>
          
            <span>Redshift</span>
          
            <span>Tableau</span>
          
        </div>
        
        
        <a href="https://github.com/banggeunho" class="btn btn-outline" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>
          View on GitHub
        </a>
        
      </div>

      <!-- Content -->
      <div class="project-detail-content">
        <section class="content-section">
<h2>개요</h2>
<p>AWS 관리형 서비스 기반 실시간 데이터 파이프라인을 구축하여 데이터 확인 속도를 2<del>3일에서 1시간</del>1일로 단축하고 Tableau 작업을 50% 이상 자동화했습니다.</p>
</section>
<section class="content-section">
<h2>문제 상황</h2>
<p><strong>기존 수동 데이터 수집 프로세스:</strong></p>
<ol>
<li><strong>요청:</strong> 데이터팀에서 특정 이벤트 데이터 분석 필요 시 백엔드팀에 요청</li>
<li><strong>추출:</strong> 백엔드 개발자가 어드민 페이지 또는 DB 직접 조회로 원본 데이터 추출</li>
<li><strong>정제:</strong> 이전 날짜 데이터를 수동으로 정제 (중복 제거, 포맷 변환, 필드 매핑)</li>
<li><strong>적재:</strong> 정제된 데이터를 데이터 웨어하우스에 수동 업로드</li>
<li><strong>지연:</strong> 데이터 요청부터 분석 가능 시점까지 평균 2~3일 소요</li>
</ol>
<p>예를 들어, 마케팅팀이 &quot;지난 주 프로모션 배너의 클릭률을 분석하고 싶다&quot;고 요청하면, 백엔드 개발자가 수동으로 DB를 조회하고 엑셀로 정제하여 전달하는 방식이었습니다.</p>
<p><strong>문제점:</strong></p>
<ul>
<li>실시간 의사결정 불가 (마케팅 캠페인 효과 측정 지연)</li>
<li>개발자 리소스 낭비 (반복적인 수동 작업)</li>
<li>데이터 정합성 이슈 (수동 정제 과정의 실수 가능성)</li>
</ul>
</section>
<section class="content-section">
<h2>해결 과제 (Task)</h2>
<ul>
<li>사용자 이벤트 데이터를 실시간으로 수집 및 저장</li>
<li>데이터 확인 시간을 2~3일에서 1시간 이내로 단축</li>
<li>저비용(월 1만원 이하)으로 월 3,000만 건 처리</li>
<li>Tableau 대시보드 자동화로 개발자 리소스 절감</li>
</ul>
</section>
<section class="content-section">
<h2>시스템 아키텍처 (Action)</h2>
<pre class="mermaid">graph LR
    A[사용자 행동] --> B[Firehose]
    B --> C[Lambda<br/>Parquet 변환]
    C --> D[S3]
    D --> E[Athena]
    E --> F[Redshift]
    F --> G[Tableau]
</pre>
</section>
<section class="content-section">
<h2>수집 이벤트</h2>
<ul>
<li>구매, 상품상세 조회, 장바구니 담기</li>
<li>로그인, 회원가입</li>
<li>장바구니 조회, 구매페이지 진입</li>
<li>검색, 배너 클릭 등</li>
</ul>
</section>
<section class="content-section">
<h2>주요 기능</h2>
<p><strong>실시간 데이터 수집:</strong></p>
<ul>
<li>애플리케이션에서 사용자 이벤트 발생 시 Kinesis Firehose로 스트리밍 전송</li>
<li>Lambda를 통해 JSON 데이터를 Parquet 포맷으로 변환 (저장 공간 70% 절감, 쿼리 성능 향상)</li>
<li>S3에 원본 데이터 백업 (장애 대비 및 재처리 가능)</li>
<li>1시간 단위 배치로 자동 파티셔닝 (년/월/일/시간 구조)</li>
</ul>
<p><strong>데이터 분석 환경:</strong></p>
<ul>
<li><strong>Athena:</strong> S3 데이터를 직접 쿼리하여 빠른 임시 조회 (서버리스, 쿼리당 과금)</li>
<li><strong>Redshift:</strong> 정형화된 분석을 위해 S3 → Redshift로 데이터 적재 (집계 및 조인 최적화)</li>
<li><strong>Tableau:</strong> Redshift 연동으로 실시간 대시보드 및 리포트 생성 (비즈니스 인사이트 도출)</li>
</ul>
</section>
<section class="content-section">
<h2>기술 스택</h2>
<ul>
<li>AWS Firehose, Lambda, S3, Athena, Redshift, Tableau</li>
</ul>
</section>
<section class="content-section">
<h2>기술적 도전과 해결</h2>
<p><strong>도전 1: Parquet 변환 및 저장 공간 최적화</strong></p>
<ul>
<li><strong>문제:</strong> JSON 포맷으로 저장 시 스토리지 비용 증가 및 Athena 쿼리 성능 저하</li>
<li><strong>해결:</strong><ul>
<li><strong>Parquet 변환 로직:</strong><ul>
<li>Lambda에서 PyArrow 라이브러리 사용</li>
<li>JSON(1GB) → Parquet(300MB) 70% 절감</li>
<li>컬럼 기반 압축으로 Athena 쿼리 속도 5배 향상</li>
</ul>
</li>
<li><strong>변환 프로세스:</strong><ul>
<li>Firehose → Lambda 트리거 → PyArrow로 변환 → S3 저장</li>
<li>배치 크기: 1000건 또는 1MB 단위로 변환</li>
</ul>
</li>
</ul>
</li>
<li><strong>효과:</strong> 월 스토리지 비용 70% 절감, Athena 쿼리 비용 80% 감소</li>
</ul>
<p><strong>도전 2: Redshift 적재 시점 및 테이블 구조</strong></p>
<ul>
<li><strong>문제:</strong> 실시간 데이터를 언제 Redshift에 적재할지 결정 필요</li>
<li><strong>해결:</strong><ul>
<li><strong>적재 시점:</strong> 매일 새벽 2시 배치로 S3 → Redshift COPY</li>
<li><strong>테이블 구조:</strong><ul>
<li>날짜별 파티션 테이블 (<code>events_20250208</code>)</li>
<li>파티션 키: <code>event_date</code> (DATE 타입)</li>
<li>정렬 키: <code>user_id</code>, <code>created_at</code> (조인 및 시계열 조회 최적화)</li>
</ul>
</li>
<li><strong>COPY 명령어 최적화:</strong><ul>
<li><code>COMPUPDATE OFF</code> - 압축 업데이트 스킵 (속도 향상)</li>
<li><code>STATUPDATE OFF</code> - 통계 업데이트 스킵 (배치 후 수동 실행)</li>
<li>병렬 COPY로 10분 내 1억 건 적재</li>
</ul>
</li>
</ul>
</li>
<li><strong>효과:</strong> Tableau 대시보드 조회 속도 10배 향상</li>
</ul>
<p><strong>도전 3: 지연 시간 편차 (1시간 vs 1일) 명확화</strong></p>
<ul>
<li><strong>문제:</strong> &quot;1시간~1일 편차&quot;의 구체적 의미 불명확</li>
<li><strong>구체적 케이스:</strong><ul>
<li><strong>Athena 즉시 조회:</strong> 이벤트 발생 → Firehose 버퍼링(5분) → S3 적재 → 즉시 쿼리 가능 (총 1시간 이내)</li>
<li><strong>Redshift 배치 후 조회:</strong> 이벤트 발생 → Firehose → S3 → 새벽 2시 배치 대기 → Redshift 적재 (총 최대 1일)</li>
</ul>
</li>
<li><strong>사용 시나리오:</strong><ul>
<li><strong>임시 조회 (Athena):</strong> &quot;오늘 특정 배너의 클릭수는?&quot; → 1시간 내 확인</li>
<li><strong>정형 분석 (Redshift):</strong> &quot;지난 주 전체 배너 성과 비교&quot; → 다음날 확인</li>
</ul>
</li>
<li><strong>선택 근거:</strong> 분석 목적에 따라 실시간성과 비용 트레이드오프</li>
</ul>
<p><strong>도전 4: 유실률 0% 달성 방법</strong></p>
<ul>
<li><strong>문제:</strong> 네트워크 장애, Lambda 실패 등으로 데이터 유실 가능</li>
<li><strong>해결:</strong><ul>
<li><strong>Firehose 자동 재시도:</strong> 최대 24시간 동안 재시도 (지수 백오프)</li>
<li><strong>실패 데이터 백업:</strong> S3 에러 버킷에 자동 저장</li>
<li><strong>모니터링:</strong> CloudWatch 알람으로 실패율 1% 초과 시 Slack 알림</li>
<li><strong>8개 주요 이벤트 전체 커버:</strong><ul>
<li>구매, 상품상세 조회, 장바구니 담기, 로그인, 회원가입, 장바구니 조회, 구매페이지 진입, 검색, 배너 클릭</li>
<li>각 이벤트별 스키마 검증 및 필수 필드 체크</li>
</ul>
</li>
</ul>
</li>
<li><strong>검증:</strong> 3개월간 3억 건 이벤트 중 유실 0건 달성</li>
</ul>
</section>
<section class="content-section">
<h2>주요 성과 (Result)</h2>
<ul>
<li><strong>데이터 확인 시간</strong>: 2<del>3일 → 1시간</del>1일 (최대 72배 단축)</li>
<li><strong>월 비용</strong>: 약 9,000원 (3,000만 건 처리)</li>
<li><strong>Tableau 작업</strong>: 50% 이상 자동화</li>
<li><strong>주요 이벤트</strong>: 100% 수집 (8개 이벤트)</li>
<li><strong>스토리지 비용</strong>: 70% 절감 (Parquet 변환)</li>
<li><strong>Athena 쿼리 속도</strong>: 5배 향상</li>
</ul>
</section>
<section class="content-section">
<h2>배운 점</h2>
<ul>
<li>AWS 관리형 서비스 활용 (서버리스 아키텍처의 장점 이해)</li>
<li>저비용 고효율 데이터 파이프라인 설계 (월 9,000원으로 3,000만 건 처리)</li>
<li>데이터 엔지니어링 기초 (ETL, 파티셔닝, 포맷 최적화)</li>
</ul>
</section>

      </div>

    </div>
  </main>

  <footer class="footer">
  <div class="container">
    <p>&copy; 2025 Geunho Bang. Built with passion.</p>
  </div>
</footer>


  <script src="../../script.js"></script>

  <!-- Mermaid for diagrams -->
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({
      startOnLoad: true,
      theme: 'base',
      themeVariables: {
        primaryColor: '#0366d6',
        primaryTextColor: '#24292e',
        primaryBorderColor: '#e1e4e8',
        lineColor: '#586069',
        secondaryColor: '#f6f8fa',
        tertiaryColor: '#fafbfc',
        background: '#ffffff',
        mainBkg: '#ffffff',
        secondBkg: '#f6f8fa',
        border1: '#e1e4e8',
        border2: '#e1e4e8',
        note: '#fff5b1',
        noteBkg: '#fff5b1',
        noteBorder: '#e1e4e8',
        noteText: '#24292e',
        fontSize: '14px',
        fontFamily: 'Inter, -apple-system, sans-serif'
      }
    });
  </script>

  <!-- Prism for syntax highlighting -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>
</body>
</html>
